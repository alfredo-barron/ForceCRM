{% extends 'base.twig' %}
{% block title %}
    <title>{{ title }} | Mercados</title>
{% endblock %}
{% block css %}
    <link href="{{ urlFor('root') }}public/plugins/datatables/dataTables.bootstrap.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="{{ urlFor('root') }}public/plugins/iCheck/square/blue.css">
{% endblock %}
{% block content %}
<div class="wrapper">
  {% include 'navbar.twig' %}
  {% include 'sidebar.twig' %}
  <div class="content-wrapper">
    <section class="content-header">
          <h1><a href="{{ urlFor('new-market') }}"> <i class="fa fa-arrow-left fa-1x"></i></a> Segmentación <small>del mercado</small></h1>
          <ol class="breadcrumb">
            <li><a href="{{ urlFor('dashboard') }}"><i class="fa fa-dashboard"></i> Force <b>CRM</b></a></li>
            <li class="active"><a href="{{ urlFor('new-market') }}">Mercados</a></li>
            <li class="active"><a href="#">Segmentación</a></li>
          </ol>
        </section>
         <!-- Main content -->
    <section class="content">
      <!-- Info boxes -->
      <div class="row">
        <div class="col-md-12">
        <div class="nav-tabs-custom">
          <!-- Tabs within a box -->
          <ul class="nav nav-tabs pull-right">
            <li class="active"><a href="#" id="gender" name="gender" data-toggle="tab">Sexo</a></li>
            <li><a href="#" id="school" name="school" data-toggle="tab">Educación</a></li>
            <li><a href="#" id="job" name="job" data-toggle="tab">Ocupación</a></li>
            <li><a href="#" id="status_civil" name="status_civil" data-toggle="tab">Estado Civil</a></li>
            <li class="pull-left header"><i class="fa fa-groups"></i>
              {% if type == "A" %}
                <i class="fa fa-star"></i> Clientes A
              {% elseif type == "B" %}
                <i class="fa fa-star-half-o"></i> Clientes B
              {% elseif type == "C" %}
                <i class="fa fa fa-star-o"></i> Clientes C
              {% elseif type == "P" %}
                <i class="fa fa-diamond"></i> Clientes potenciales
              {% endif %}
            </li>
          </ul>
          <div class="tab-content no-padding">
            <!-- Morris chart - Sales -->
            <div class="chart tab-pane active" style="position: relative; height: 500px;">
              <br><br>
              <div class="col-md-offset-3 col-md-8">
                <div id="canvas-holder">
                  <div class="row" id="grafica1">
                    <div class="col-md-8">
                      <canvas id="chart-area" width="400" height="400"></canvas>
                    </div>
                    <div class="col-md-4">
                      <ul class="chart-legend clearfix">
                        <li><i class="fa fa-circle-o text-blue"></i> Hombres</li>
                        <li><i class="fa fa-circle-o text-pink"></i> Mujeres</li>
                      </ul>
                    </div>
                  </div>
                  <div class="row" id="grafica2">
                    <div class="col-md-8">
                      <canvas id="chart-area2" width="500" height="500"></canvas>
                    </div>
                  </div>
                  <div class="row" id="grafica3">
                    <div class="col-md-8">
                      <canvas id="chart-area3" width="900" height="900"></canvas>
                    </div>
                  </div>
                  <div class="row" id="grafica4">
                    <div class="col-md-8">
                      <canvas id="chart-area4" width="400" height="400"></canvas>
                    </div>
                    <div class="col-md-4">
                      <ul class="chart-legend clearfix">
                        <li><i class="fa fa-circle-o text-blue"></i> Soltero (a)</li>
                        <li><i class="fa fa-circle-o text-yellow"></i> Unión libre</li>
                        <li><i class="fa fa-circle-o text-pink"></i> Casado (a)</li>
                        <li><i class="fa fa-circle-o text-green"></i> Divorciado (a)</li>
                        <li><i class="fa fa-circle-o text-purple"></i> Viudo (a)</li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div><!-- /.nav-tabs-custom -->
      </div><!-- /.row -->
    </section><!-- /.content -->
   </div>
    <footer class="main-footer">
    <strong>Copyright &copy; {{ "now"|date("Y") }} </strong> Todos los derechos reservados.
  </footer>
  </div>
{% endblock %}
{% block js %}
  <script src="{{ urlFor('root')}}public/js/Chart.js" type="text/javascript"></script>
  <!--<script src="{{ urlFor('root')}}public/js/graphs.js" type="text/javascript"></script>-->
  <script src="{{ urlFor('root') }}public/css/dist/js/demo.js"></script>
  <script>
    $(function() {
      $("#grafica1").show();
      $('#grafica2').hide();
      $('#grafica3').hide();
      $('#grafica4').hide();

      $('#gender').click(function(event) {
        $("#grafica1").show();
        $('#grafica2').hide();
        $('#grafica3').hide();
        $('#grafica4').hide();
      });

      $('#school').click(function(event) {
        $("#grafica1").hide();
        $('#grafica2').show();
        $('#grafica3').hide();
        $('#grafica4').hide();
      });

      $('#job').click(function(event) {
        $("#grafica1").hide();
        $('#grafica2').hide();
        $('#grafica3').show();
        $('#grafica4').hide();
      });

      $('#status_civil').click(function(event) {
        $("#grafica1").hide();
        $('#grafica2').hide();
        $('#grafica3').hide();
        $('#grafica4').show();
      });
    });

    var pieData = [
    {
      value: {{ gender.h|e('js') }},
      color:"#3c8dbc",
      highlight: "#3CA1BD",
      label: "Hombres"
    },
    {
      value: {{ gender.m|e('js') }},
      color: "#f012be",
      highlight: "#F011DA",
      label: "Mujeres"
    }

  ];

  var barChartData = {
    labels: ["Ninguna", "Primaria", "Secundaria", "Preparatoria o Bachillerato", "Licenciatura", "Maestria o Doctorado"],
    datasets: [
        {
            label: "Segmentación por educación",
            fillColor: "#6b9dfa",
            strokeColor: "#6b9dfa",
            pointColor: "#1e45d7",
            pointStrokeColor: "#fff",
            pointHighlightFill: "#fff",
            pointHighlightStroke: "rgba(220,220,220,1)",
            data: [{{ schools.ninguna|e('js') }},{{ schools.primaria|e('js') }},{{ schools.secundaria|e('js') }},{{ schools.preparatoria|e('js') }},{{ schools.licenciatura|e('js') }},{{ schools.maestria|e('js') }}]
        }
      ]

  }
    var lineChartData = {
      labels : ["Estudiantes","Labores del hogar","Profesionales por cuenta ajena","Profesionales por cuenta propia","Desempleados","Directivos","Cargos intermedios","Trabajadores de gobierno","Maestros","Trabajadores de salud","Fuerzas armadas","Otros"],
      datasets : [
        {
          label: "Segmentación por ocupación",
          fillColor : "rgba(220,220,220,0.2)",
          strokeColor : "#6b9dfa",
          pointColor : "#1e45d7",
          pointStrokeColor : "#fff",
          pointHighlightFill : "#fff",
          pointHighlightStroke : "rgba(220,220,220,1)",
          data : [{{ jobs.estudiante|e('js') }},{{ jobs.labores_hogar|e('js') }},{{ jobs.profesional_cuenta_ajena|e('js') }},{{ jobs.profesional_cuenta_propia|e('js') }},{{ jobs.desempleado|e('js') }},{{ jobs.directivo|e('js') }},{{ jobs.cargos_intermedios|e('js') }},{{ jobs.trabajadores_gobierno|e('js') }},{{ jobs.trabajadores_educacion|e('js') }},{{ jobs.trabajadores_salud|e('js') }},{{ jobs.fuerzas_armadas|e('js') }},{{ jobs.otros|e('js') }}]
        }
      ]
    }

 var donaData = [
    {
      value: {{ status_civil.soltero|e('js') }},
      color:"#0b82e7",
      highlight: "#0c62ab",
      label: "Soltero (a)"
    },
    {
      value: {{ status_civil.union_libre|e('js') }},
      color: "#e3e860",
      highlight: "#a9ad47",
      label: "Unión libre"
    },
    {
      value: {{ status_civil.casado|e('js') }},
      color: "#eb5d82",
      highlight: "#b74865",
      label: "Casado (a)"
    },
    {
      value: {{ status_civil.divorciado|e('js') }},
      color: "#5ae85a",
      highlight: "#42a642",
      label: "Divorciado (a)"
    },
    {
      value: {{ status_civil.viudo|e('js') }},
      color: "#e965db",
      highlight: "#a6429b",
      label: "Viudo (a)"
    }

  ];

var ctx = document.getElementById("chart-area").getContext("2d");
var ctx2 = document.getElementById("chart-area2").getContext("2d");
var ctx3 = document.getElementById("chart-area3").getContext("2d");
var ctx4 = document.getElementById("chart-area4").getContext("2d");
window.myPie = new Chart(ctx).Pie(pieData);
window.myPie = new Chart(ctx2).Bar(barChartData, {responsive:true});
window.myPie = new Chart(ctx3).Line(lineChartData, {responsive:true});
window.myPie = new Chart(ctx4).Doughnut(donaData);
  </script>
{% endblock %}
